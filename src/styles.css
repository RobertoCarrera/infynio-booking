@import "../node_modules/bootstrap/dist/css/bootstrap.min.css";
@import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css");
/* FullCalendar core stylesheet (CDN fallback) - loads FullCalendar v6 styles so
  timeGrid/dayGrid render properly. Using CDN avoids bundler resolution issues.
*/
@import url("https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/main.min.css");

/* Calendar global rules removed per request.
  If calendar-specific styling is needed later, add a dedicated file such as
  src/app/components/calendar/calendar-overrides.css and import it only where used. */

/* --- Admin: disable page-level vertical scrolling for admin routes --- */
/* Add .route-admin to <body> when on any admin route; these rules completely
   disable document-level vertical scrolling while allowing internal scrollable
   regions (like .tabla-usuarios and .mobile-list-viewport) to keep their own
   scrollbars and scrolling behaviour. */
html.route-admin, body.route-admin {
  overflow: hidden !important;
  height: 100% !important;
}

/* Ensure the app shell/main don't introduce page-level scrolling */
body.route-admin .app-shell,
body.route-admin .app-main {
  overflow: hidden !important;
  height: 100% !important;
}

/* Explicitly enable internal scrollable containers used in admin views */
body.route-admin .tabla-usuarios,
body.route-admin .mobile-list-viewport,
body.route-admin .mobile-list-scroll {
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
}

/* Calendar behaviour is now controlled by FullCalendar options in
  src/app/admin/calendar/admin-calendar.component.ts (slotMinTime, hiddenDays,
  businessHours). Removed the global CSS overrides to allow native rendering. */

/* (removed) user calendar layout & overrides â€” restarting styles */

/* Mobile filters overlay: ensure it never affects desktop layout */
@media (min-width: 992px) {
  /* removed mobile filters styles */
}

/* On mobile, keep them out of normal flow and only visible when .open */
@media (max-width: 991.98px) {
  /* removed mobile filters styles */
}

/* Lightweight page padding for the calendar route */
.p-wrapper {
  padding: 1rem; /* small padding on all sides */
  box-sizing: border-box;
}

/* Make the calendar area occupy a fixed portion of the viewport and use a
   flex layout so the toolbar/header stay visible while the time grid scrolls. */
.p-wrapper {
  /* prefer responsive viewport-based sizing; allow adjustments via CSS variable */
  --calendar-vh: 92vh;
  height: var(--calendar-vh);
  max-height: var(--calendar-vh);
  /* keep wrapper visible so non-time elements (toolbar, headers) remain in flow */
  overflow: visible;
  /* larger gap below the calendar so following page content doesn't stick */
  margin-bottom: 3rem;
}

@media (min-width: 768px) {
  .p-wrapper {
    padding: 1rem 1.5rem; /* larger horizontal padding on desktop */
  }
}

@media (min-width: 1200px) {
  .p-wrapper {
    padding: 1rem 2rem; /* generous margins on wide screens */
  margin-bottom: 4rem;
  }
}

/* Ensure the calendar fills the available inner area */
.p-wrapper > full-calendar {
  display: block;
  width: 100%;
  height: 100%;
  min-height: 56vh; /* increase minimum so more hours are visible on small screens */
}

/* Ensure only FullCalendar's internal scroller (timeGrid) becomes scrollable.
   This keeps toolbar/header static while the hourly slots scroll vertically. */
.p-wrapper > full-calendar,
.p-wrapper > full-calendar .fc {
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* Allow the view harness to flex and ensure children can shrink properly. */
.p-wrapper .fc .fc-view-harness {
  flex: 1 1 auto;
  min-height: 0;
  display: flex;
  flex-direction: column;
  /* Let the harness expand using viewport-based height to reduce internal scroll */
  min-height: calc(var(--calendar-vh) - 6rem);
}

/* Make only the internal scroller (timeGrid content) take remaining space */
.p-wrapper .fc .fc-scroller {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  /* Soft cap so the scroller shows a scrollbar when content exceeds viewport
     space; adjust the "8rem" if your toolbar/header height differs. */
  max-height: calc(var(--calendar-vh, 92vh) - 8rem);
}

/* Make timeGrid hourly slots taller by giving each slot a min-height proportional
  to the visible calendar area. We assume visible hours 07:00-20:00 (13 slots). */
.p-wrapper .fc .fc-timegrid-slot {
  /* Prefer the explicit slot min-height variable which is simpler and
     robust across browsers. Avoid multiplying viewport strings by px. */
  min-height: var(--calendar-slot-min-height) !important;
  height: auto !important;
}

/* Also ensure the slot labels line-height scales so labels stay vertically centered. */
.p-wrapper .fc .fc-timegrid-slot-label {
  /* Keep labels vertically centered using the same slot min-height. */
  line-height: var(--calendar-slot-min-height) !important;
}

/* If FullCalendar uses a different internal slot element, include additional selectors */
.p-wrapper .fc .fc-timegrid-slot > .fc-timegrid-slot-lane,
.p-wrapper .fc .fc-timegrid-slots td {
  min-height: var(--calendar-slot-min-height) !important;
}

/* (removed) break hour label/border overrides */


/* (removed) axis sizing/overflow overrides */
/* (removed) misc FullCalendar overrides for user calendar */

/* ------------------------------------------------------------------
   Improve legibility: increase per-hour slot height for the user calendar
   Scoped to `.p-wrapper` so admin calendars or other instances aren't affected
   We use a CSS variable so it's easy to tweak later.
------------------------------------------------------------------ */
.p-wrapper {
  /* default slot min-height (mobile / small screens) */
  --calendar-slot-min-height: 60px;
}

@media (min-width: 992px) {
  .p-wrapper {
    /* larger rows on desktop */
    --calendar-slot-min-height:  60px;
  }
}

/* Strong, global selectors that target FullCalendar's timeGrid slot elements */
.p-wrapper .fc .fc-timegrid-slot,
.p-wrapper .fc .fc-timegrid-slot > .fc-timegrid-slot-lane,
.p-wrapper .fc .fc-timegrid-slots td,
.p-wrapper .fc .fc-timegrid-slots tr {
  min-height: var(--calendar-slot-min-height) !important;
  height: auto !important;
}

/* Ensure event columns and the scroller establish a positioning context
   so `.fc-timegrid-event-harness` (position:absolute) moves when the
   timegrid is scrolled. This forces the harness to be positioned relative
   to the scrolling container rather than the viewport. */
.p-wrapper .fc .fc-scroller,
.p-wrapper .fc .fc-timegrid-col-events {
  position: relative;
}

/* Some FullCalendar builds use slightly different wrapper elements for the
   scrollable region. Include additional selectors so the rule applies
   regardless of minor DOM differences between versions. The goal is to
   ensure the internal timegrid becomes the only vertical scroller. */
.p-wrapper .fc .fc-timegrid .fc-scroller,
.p-wrapper .fc .fc-timegrid-body,
.p-wrapper .fc .fc-scrollgrid-section-liquid,
.p-wrapper .fc .fc-timegrid-col-events > .fc-scroller {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  position: relative; /* positioning context for absolutely positioned harnesses */
  min-height: 0;
  /* soft cap so the scroller shows a scrollbar when content exceeds viewport
     space. Use a CSS var for the header/tool height so it can be tuned. */
  max-height: calc(var(--calendar-vh, 92vh) - var(--calendar-header-height, 8rem));
}

/* Ensure the event column and harness layers are above background layers */
.p-wrapper .fc .fc-timegrid-col-events { z-index: 3; }
.p-wrapper .fc .fc-timegrid-event-harness { z-index: 4; }
.p-wrapper .fc .fc-timegrid-event { z-index: 5; }

/* Ensure higher-level column containers also provide a positioning context
   for absolutely-positioned event harnesses. This anchors events to the
   scrolled timegrid content so they move with the hours. */
/* Avoid forcing position:relative on high-level FullCalendar columns; this
  can interfere with internal absolute positioning. The scroller and
  .fc-timegrid-col-events are used as the positioning context instead. */

/* NOTE: do not make .fc-timegrid-slots a clipping/scroll container; the
  internal .fc-scroller should control vertical scrolling so absolutely-
  positioned event harnesses remain visible and move with the scroller. */

/* Ensure the time labels remain vertically centered */
.p-wrapper .fc .fc-timegrid-slot-label,
.p-wrapper .fc .fc-timegrid-slot .fc-timegrid-slot-label {
  line-height: var(--calendar-slot-min-height) !important;
}

/* Slightly reduce font-size on narrow screens to keep labels readable */
@media (max-width: 575.98px) {
  .p-wrapper .fc .fc-timegrid-slot-label {
    font-size: 0.85rem;
  }
}

/* Hide the 14:00 and 15:00 rows/slots in the timeGrid (scoped to .p-wrapper).
   We include multiple selectors to cover FullCalendar DOM variants across versions.
*/
.p-wrapper .fc .fc-timegrid-slots tr[data-time="14:00:00"],
.p-wrapper .fc .fc-timegrid-slots tr[data-time="15:00:00"],
.p-wrapper .fc .fc-timegrid-slot[data-time="14:00:00"],
.p-wrapper .fc .fc-timegrid-slot[data-time="15:00:00"],
.p-wrapper .fc .fc-timegrid-slot-lane[data-time="14:00:00"],
.p-wrapper .fc .fc-timegrid-slot-lane[data-time="15:00:00"],
.p-wrapper .fc .fc-timegrid-slots td[data-time="14:00:00"],
.p-wrapper .fc .fc-timegrid-slots td[data-time="15:00:00"] {
  display: none !important;
  height: 0 !important;
  min-height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  border: 0 !important;
}

/* Prevent a global bg-harness color from covering slot-specific styles. */
.p-wrapper .fc .fc-timegrid-bg-harness{
  background-color: transparent !important;
}

/* If FullCalendar renders background events (.fc-bg-event) inside the harness,
   neutralize them so they don't override the per-slot background we set. */
.p-wrapper .fc .fc-timegrid-bg-harness .fc-bg-event,
.p-wrapper .fc .fc-timegrid-bg-harness .fc-bg {
  background: transparent !important;
  border: 0 !important;
}

/* Ensure the 13:00 slot lane(s) get the grey background and match the
   explicit 45px height previously configured. */
.p-wrapper .fc .fc-timegrid-slots tr[data-time="13:00:00"] td,
.p-wrapper .fc .fc-timegrid-slot[data-time="13:00:00"] > .fc-timegrid-slot-lane,
.p-wrapper .fc .fc-timegrid-slots td[data-time="13:00:00"] {
  background-color: gray !important;
  --calendar-slot-min-height: 10px !important;
  color: transparent;
}

/* Also hide axis/label cells that may show the hour text */
/* If axis labels inside hidden rows still appear, we'll target them more
  specifically later; keeping this comment to remind why we hide those rows. */

/* Calendar layout helpers for the new calendar template */
.calendar-main { display: flex; gap: 1rem; align-items: flex-start; }
.desktop-filters {
  width: 260px;
  flex: 0 0 260px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 6px 18px rgba(15,23,42,0.06);
  padding: 0.75rem;
  overflow: auto;
  transition: transform 220ms ease, opacity 180ms ease;
}
.desktop-filters.collapsed { transform: translateX(-8px) scale(0.98); opacity: 0.88; }
.desktop-filters:not(.open) { display: none; }
.desktop-filters .filters-body { margin-top: 0.5rem; }
.desktop-filters .filter-item { margin: 0.35rem 0; }
.desktop-filters .type-pill { width: 28px; height: 18px; border-radius: 6px; display: inline-block; }

.calendar-wrapper { min-width: 0; }
.calendar-content { height: 100%; min-height: 200px; }

/* Mobile filters overlay */
.mobile-filters-panel { position: fixed; inset: 0; display: flex; align-items: flex-end; justify-content: center; z-index: 1400; }
.mobile-filters-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.32); }
.mobile-filters-content { position: relative; width: 100%; max-width: 520px; background: #fff; border-top-left-radius: 12px; border-top-right-radius: 12px; box-shadow: 0 -8px 30px rgba(2,6,23,0.12); padding: 1rem; max-height: 80vh; overflow: auto; }
.mobile-filters-panel .filters-body { margin-top: 0.5rem; }

/* ==============================================
   Shared TOAST NOTIFICATIONS (copied from admin styles)
   Placed in global styles so admin and user calendars share the same look.
   ============================================== */

.toast-container {
  position: fixed;
  right: 20px;
  bottom: 20px;
  left: auto;
  transform: none;
  z-index: 24000; /* above modals/backdrops */
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease-in-out;
}

.toast-container.show {
  opacity: 1;
  visibility: visible;
}

.toast {
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 300px;
  max-width: 500px;
  display: flex;
  align-items: center;
  padding: 16px 20px;
  margin: 0 20px;
  border-left: 4px solid #28a745;
  animation: slideInDown 0.3s ease-out;
  pointer-events: auto; /* allow clicks on close */
}

.toast-success {
  border-left-color: #28a745;
}

.toast-error {
  border-left-color: #dc3545;
}

.toast-content {
  display: flex;
  align-items: center;
  flex: 1;
  font-weight: 500;
  color: #333;
}

.toast-content i {
  margin-right: 12px;
  font-size: 18px;
}

.toast-success .toast-content i {
  color: #28a745;
}

.toast-error .toast-content i {
  color: #dc3545;
}

.toast-close {
  background: none;
  border: none;
  color: #666;
  cursor: pointer;
  padding: 0;
  margin-left: 16px;
  font-size: 14px;
  opacity: 0.7;
  transition: opacity 0.2s ease;
  pointer-events: auto;
}

.toast-close:hover {
  opacity: 1;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Backwards compatibility: keep slideInDown name working for any existing uses */
@keyframes slideInDown {
  from { opacity: 0; transform: translateY(-100%); }
  to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 991.98px) {
  .desktop-filters { display: none !important; }
  .calendar-main { flex-direction: column; }
  .calendar-wrapper { width: 100%; }
}